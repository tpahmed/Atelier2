<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Atelier 2</title>
    </head>
    <body>

        <label for="produpload">
            Upload products list :
        </label>
        <input type="file" name="produpload" id="produpload">
        <br>
        <label for="prodsearch">
            Search :
        </label>
        <input type="text" name="prodsearch" id="prodsearch">


        <label for="catfilter">
            Filter :
        </label>
        <select name="catfilter" id="catfilter">
            <option value="" selected>no filter</option>
        </select>
        <label for="sortprods">Sort by :</label>
        <select name="sortprods" id="sortprods">
            <option value="" selected>no sort</option>
            <option value="stock" selected>stock</option>
            <option value="price" selected>price</option>
        </select>
    <button id="resetprod">Reset</button>
    <table border="1">
        <thead>
            <tr>
                <th>name</th>
                <th>price</th>
                <th>category</th>
                <th>stock</th>
            </tr>
        </thead>
        <tbody id="prodtable">
            
        </tbody>
    </table>
    <h3>Totale Price : <span id="tprice">0.0</span> DH</h3>
    <button id="lowonstock">low on stock</button>
    <button id="generatechart">generate chart</button>

    <canvas id="productChart"></canvas>


    <script>
        const prods=[];

        document.getElementById('produpload')
            .addEventListener('change', function () {
                let fr = new FileReader();
                fr.onload = function () {
                    prods.push(...JSON.parse(fr.result));
                    // function defined in index.js:39
                    loadOPS();
                }
                fr.readAsText(this.files[0]);
            })

    </script>
    <script src="index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
</body>
</html>